{% extends 'layout.twig' %}

{% set pageTitle = 'imprimir la medalla' %}
{% block pageContent %}
<link rel="stylesheet" href="{{ app.request.baseUrl }}/assets/css/printPage.css"/>
<div id="toRemove">
	<a class="btn btn-info buttonright"  id="toRemove1" role="button" onclick="savePage()"> <span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> Descargar</a>
	<a class="btn btn-info buttonleft"  id="toRemove2" role="button" onclick="printPage()"> <span class="glyphicon glyphicon-print" aria-hidden="true"></span> Imprimir</a>
	<a class="btn btn-info buttonleft"  id="toRemove3" role="button" onclick="addWork()"> <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Añadir actividades</a>
	<a href="{{ app.request.baseUrl}}/voluntarios/{{voluntario.idPersona}}" class="btn btn-info buttonleft"  id="toRemove3" role="button"> <span class="glyphicon glyphicon-triangle-left" aria-hidden="true"></span> Atras</a>
	<div class="col-md-12" id="addwork">

	</div>
</div>

<div id="toPrint">
	<img src="{{ app.request.baseUrl }}/assets/img/Fundacion-Zamora-Teran.jpg" class="logo">
	<h2>CONSTANCIA</h2>
	{%  if voluntario.Area == 1 %}
	<p>Por este medio hago constar que <b>{{voluntario.Nombre}}</b>, con número de cédula <b>{{voluntario.NoDeCedula}}</b> se ha desempeñado como 

		{% if voluntario.Sexo != true %}
		voluntaria
		{% else %}
		voluntario
		{% endif %} 

		en el área de Comunicación de la Fundación Zamora Terán, cumpliendo con un total de {{trabajaPara.Total}} horas laborales desde el 

		{% if trabajaDe != null %}
		{{ trabajaDe|date('d')}} de {{ months[trabajaDe|date("m")] }} de {{trabajaDe|date('Y')}} 
		{% else %}
		{{ voluntario.DiaInicio|date('d')}} de {{ months[voluntario.DiaInicio|date("m")] }} de {{voluntario.DiaInicio|date('Y')}}
		{% endif %}


		hasta el {{ trabajaA|date('d')}} de {{  months[(trabajaA|date("m"))] }} de {{trabajaA|date('Y')}}.</p>
		<p>A continuación se detallan algunas de las actividades en las cuales <b>{{voluntario.Nombre}}</b> aportó generosamente con sus habilidades y tiempo:
			<ul id="worklist">
				<li>Edición de videos oficiales de la organización.</li>
				<li>Diseño de: artes publicitarios, e-proms para redes sociales, invitaciones y materiales impresos.</li>
				<li>Apoyo en el diseño y formato de boletines informativos mensuales.</li>
			</ul>
		</p>
		{% elseif voluntario.Area == 2 %}
		<p>Por este medio hago constar que <b>{{voluntario.Nombre}}</b>, con número de cédula <b>{{voluntario.NoDeCedula}}</b> se ha desempeñado como {% if voluntario.Sexo != true %}voluntaria{% else %}voluntario{% endif %} en el área de Mercadeo de la Fundación Zamora Terán, cumpliendo con un total de {{trabajaPara.Total}} horas laborales desde el 


			{% if trabajaDe != null %}
			{{ trabajaDe|date('d')}} de {{ months[trabajaDe|date("m")] }} de {{trabajaDe|date('Y')}} 
			{% else %}
			{{ voluntario.DiaInicio|date('d')}} de {{ months[voluntario.DiaInicio|date("m")] }} de {{voluntario.DiaInicio|date('Y')}}
			{% endif %}


			hasta el {{ trabajaA|date('d')}} de {{  months[(trabajaA|date("m"))] }} de {{trabajaA|date('Y')}}.</p>
			<p>A continuación se detallan algunas de las actividades en las cuales <b>{{voluntario.Nombre}}</b> aportó generosamente con sus habilidades y tiempo:
				<ul id="worklist">
					<li>Redacción de cartas de agradecimiento a donantes de la organización.</li>
					<li>Capacitaciones a personal de empresas donantes.</li>
					<li>Elaboración de bases de datos</li>
					<li>Elaboración de inventarios de artículos.</li>
				</ul>
			</p>
			{% elseif voluntario.Area == 3 %}
			<p>Por este medio hago constar que <b>{{voluntario.Nombre}}</b>, con número de cédula <b>{{voluntario.NoDeCedula}}</b> se ha desempeñado como {% if voluntario.Sexo != true %}voluntaria{% else %}voluntario{% endif %} en el área de Área Educativa de la Fundación Zamora Terán, cumpliendo con un total de {{trabajaPara.Total}} horas laborales desde el 


				{% if trabajaDe != null %}
				{{ trabajaDe|date('d')}} de {{ months[trabajaDe|date("m")] }} de {{trabajaDe|date('Y')}} 
				{% else %}
				{{ voluntario.DiaInicio|date('d')}} de {{ months[voluntario.DiaInicio|date("m")] }} de {{voluntario.DiaInicio|date('Y')}}
				{% endif %}

				hasta el {{ trabajaA|date('d')}} de {{  months[(trabajaA|date("m"))] }} de {{trabajaA|date('Y')}}.</p>
				<p>A continuación se detallan algunas de las actividades en las cuales <b>{{voluntario.Nombre}}</b> aportó generosamente con sus habilidades y tiempo:
					<ul id="worklist">
						<li>Visitas de acompañamiento a escuelas beneficiadas por el Programa Educativo: “Una Computadora por Niño”.</li>
						<li>Asistencia a docentes en uso de actividades de la laptop XO.</li>
						<li>Asistencia en estrategias de integración de la XO en las asignaturas impartidas.</li>
						<li>Mantenimiento preventivo de laptops XO.</li>
					</ul>
				</p>
				{% elseif voluntario.Area == 4 %}
				<p>Por este medio hago constar que <b>{{voluntario.Nombre}}</b>, con número de cédula <b>{{voluntario.NoDeCedula}}</b> se ha desempeñado como {% if voluntario.Sexo != true %}voluntaria{% else %}voluntario{% endif %} en el área de Programa de Voluntariado de la Fundación Zamora Terán, cumpliendo con un total de {{trabajaPara.Total}} horas laborales desde el 


					{% if trabajaDe != null %}
					{{ trabajaDe|date('d')}} de {{ months[trabajaDe|date("m")] }} de {{trabajaDe|date('Y')}} 
					{% else %}
					{{ voluntario.DiaInicio|date('d')}} de {{ months[voluntario.DiaInicio|date("m")] }} de {{voluntario.DiaInicio|date('Y')}}
					{% endif %}


					hasta el {{ trabajaA|date('d')}} de {{  months[(trabajaA|date("m"))] }} de {{trabajaA|date('Y')}}.</p>
					<p>A continuación se detallan algunas de las actividades en las cuales <b>{{voluntario.Nombre}}</b> aportó generosamente con sus habilidades y tiempo:
						<ul id="worklist">
							<li>Captación de voluntarios en universidades y organizaciones aliadas.</li>

							<li>Desarrollo de actividades de formación de voluntarios.</li>

							<li>Apoyo en logística y presentaciones informativas del Programa Educativo: “Una Computadora por Niño”.</li>
						</ul>
					</p>
					{% elseif voluntario.Area == 5 %}
					<p>Por este medio hago constar que <b>{{voluntario.Nombre}}</b>, con número de cédula <b>{{voluntario.NoDeCedula}}</b> se ha desempeñado como {% if voluntario.Sexo != true %}voluntaria{% else %}voluntario{% endif %} en el área de Monitoreo y Evaluación de la Fundación Zamora Terán, cumpliendo con un total de {{trabajaPara.Total}} horas laborales desde el 


						{% if trabajaDe != null %}
						{{ trabajaDe|date('d')}} de {{ months[trabajaDe|date("m")] }} de {{trabajaDe|date('Y')}} 
						{% else %}
						{{ voluntario.DiaInicio|date('d')}} de {{ months[voluntario.DiaInicio|date("m")] }} de {{voluntario.DiaInicio|date('Y')}}
						{% endif %}


						hasta el {{ trabajaA|date('d')}} de {{  months[(trabajaA|date("m"))] }} de {{trabajaA|date('Y')}}.</p>
						<p>A continuación se detallan algunas de las actividades en las cuales <b>{{voluntario.Nombre}}</b> aportó generosamente con sus habilidades y tiempo:
							<ul id="worklist">
								<li>Aplicación y digitación de instrumentos de recolección de información primaria de escuelas beneficiadas por el Programa Educativo: “Una Computadora por Niño”.</li>

								<li>Limpieza y tabulación de bases de datos.</li>

								<li>Creación de máscaras para clasificación de escuelas.</li>
							</ul>
						</p>
						{% elseif voluntario.Area == 6 %}
						<p>Por este medio hago constar que <b>{{voluntario.Nombre}}</b>, con número de cédula <b>{{voluntario.NoDeCedula}}</b> se ha desempeñado como {% if voluntario.Sexo != true %}voluntaria{% else %}voluntario{% endif %} en el área de Técnico de la Fundación Zamora Terán, cumpliendo con un total de {{trabajaPara.Total}} horas laborales desde el 


							{% if trabajaDe != null %}
							{{ trabajaDe|date('d')}} de {{ months[trabajaDe|date("m")] }} de {{trabajaDe|date('Y')}} 
							{% else %}
							{{ voluntario.DiaInicio|date('d')}} de {{ months[voluntario.DiaInicio|date("m")] }} de {{voluntario.DiaInicio|date('Y')}}
							{% endif %}


							hasta el {{ trabajaA|date('d')}} de {{  months[(trabajaA|date("m"))] }} de {{trabajaA|date('Y')}}.</p>
							<p>A continuación se detallan algunas de las actividades en las cuales <b>{{voluntario.Nombre}}</b> aportó generosamente con sus habilidades y tiempo:
								<ul id="worklist">
									<li>Diagnóstico de daños y defectos de computadoras XO.</li>
									<li>Mantenimiento y Reparación de laptops XO.</li>
									<li>Verificación de componentes electrónicos y no electrónicos</li>
								</ul>
							</p>
							{% endif %}

							
							<p>Como Coordinadora del Programa de Voluntariado de esta institución, he tenido la oportunidad de valorar la calidad de trabajo que realiza <b>{{voluntario.Nombre}}</b> para la implementación del Programa Educativo "Una Computadora por Niño", identificando en {% if voluntario.Sexo != true %}ella{% else %}él{% endif %} un alto grado de disposición y responsabilidad en las tareas asignadas para el buen funcionamiento de nuestra organización.</p>
							<p>Dado en la ciudad de Managua a los {{ "now"|date('d')}} días del mes de {{ months["now"|date("m")] }} de {{"now"|date('Y')}}</p>


							<p class="greeting atentamente">Atentamente,</p>
							<p class="greeting"><b>Sofana Barreto Barrera</b></p>
							<p class="greeting"><b>Coordinadora</b></p>
							<p class="greeting"><b>Programa de Voluntariado</b></p>

							<div id="down">	
								<p class="quote"><i><b>"Uniendo Esfuerzos Construyendo el Futuro"</b></i></p>
								<p class="footer" id="footer"><b>Centro Financiero LAFISE, KM. 5.5 Carretera a Masaya. Tel.:(505) 2270-4786 &#9679; (505) 2278-2777 &#9679; www.fundacionzt.org &#9679; info@fundacionzt.org</b></p>
							</div>

						</div>
						<script type="text/javascript" src="{{ app.request.baseUrl }}/assets/js/jquery.js"></script>
						<script type="text/javascript" src="{{ app.request.baseUrl }}/assets/js/jspdf.js"></script>
						<script>
							var monthNames = [
							"Enero", 
							"Febrero", 
							"Marzo",
							"Abril", 
							"Mayo", 
							"Junio", 
							"Julio",
							"Agosto", 
							"Septiembre",
							"Octubre",
							"Noviembre", 
							"Diciembre"
							];
							var counter = 1;
							function printPage() {
								//document.getElementById("container").style.margin = 0;
								document.getElementById("toRemove").style.opacity = 0;
								document.getElementById("toRemove").style.height = 0;
								document.getElementById("toRemove1").style.opacity = 0;
								document.getElementById("toRemove1").style.height = 0;	
								document.getElementById("toRemove2").style.opacity = 0;
								document.getElementById("toRemove2").style.height = 0;	
								/**document.getElementById("down").style.position = "absolute";
								document.getElementById("down").style.bottom = "0";
								document.getElementById("down").style.width="720px";
								document.getElementById("footer").style.width="720px";**/	
								window.print();
								setTimeout(100)
								/**document.getElementById("down").style.position = "relative";
								document.getElementById("down").style.margin = "auto";
								document.getElementById("container").style.margin = "15px";**/
								document.getElementById("toRemove").style.opacity = 100;
								document.getElementById("toRemove").style.height = "100%";
								document.getElementById("toRemove1").style.opacity = 100;
								document.getElementById("toRemove1").style.height = "100%";	
								document.getElementById("toRemove2").style.opacity = 100;
								document.getElementById("toRemove2").style.height = "100%";	
							}

							function savePage() {
								document.getElementById("footer").style.width="522px";
								var pdf = new jsPDF('p', 'pt', 'letter')

		// source can be HTML-formatted string, or a reference
		// to an actual DOM element from which the text will be scraped.
		, source = document.getElementById("toPrint");


		margins = {
			top: 10,
			bottom: 10,
			left: 40,
			width: 522
		};
		
		// all coords and widths are in jsPDF instance's declared units
		// 'inches' in this case
		pdf.fromHTML(
		  	source // HTML string or DOM elem ref.
		  	, margins.left // x coord
		  	, margins.top // y coord
		  	, {
		  		'width': margins.width // max width of content on PDF
		  	},
		  	function (dispose) {
		  	  // dispose: object with X, Y of the last line add to the PDF
		  	  //          this allow the insertion of new lines after html
		  	  pdf.save('{{voluntario.Nombre}}.pdf');
		  	},
		  	margins
		  	)
	}

	function addWork(){
		var newTextBoxDiv = $(document.createElement('div'))
		.attr("id", 'TextBoxDiv' + counter);

		newTextBoxDiv.after().html(
			'<button type="button" class="btn btn-info" data-type="plus"  onclick="removediv(' + counter + ')">' +
			'<span class="glyphicon glyphicon-remove">' +
			'</span></button>' + 
			'<label style="width:75px;margin-left:15px">Actividad:</label>' +
			'<input type="text" class="form-control" name="textbox" id="textbox' + counter + '" value="" style="width:600px;display:initial;margin-right:15px;" > ' + 
			'<button type="button" class="btn btn-info" data-type="plus" onclick="addTextdiv(' + counter + ')">' + 
			'<span class="glyphicon glyphicon-plus">' + 
			'</span></button>'
			);

		newTextBoxDiv.appendTo("#addwork");
		counter++;
	}

	function removediv(removeMe){
		$("#TextBoxDiv" + removeMe).remove();
		document.getElementById("element" + (removeMe+1)).remove();
	}

	function addTextdiv(number){
		if(document.getElementById("element" + counter) == null){
			var ul = document.getElementById("worklist");
			var li = document.createElement("li");
			li.appendChild(document.createTextNode($("#textbox" + number).val()));
	  		li.setAttribute("id", "element" + counter); // added line
	  		ul.appendChild(li);
	  	}else{
	  		console.log($("#textbox" + number).val());
	  		document.getElementById("element" + (number+1)).innerHTML = $("#textbox" + number).val();
	  	}
	  }	

	</script>

	{% endblock %}
